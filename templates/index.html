<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>AquaFlow</title>
  <link rel="stylesheet" href="/static/style.css" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="bg"></div>

  <canvas id="confetti" aria-hidden="true"></canvas>

  <!-- Goal toast -->
  <div class="toast" id="goalToast" style="display:none" role="status" aria-live="polite">
    <div class="toastInner">
      <div class="toastIcon">‚úÖ</div>
      <div>
        <div class="toastTitle">–¶–µ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!</div>
        <div class="toastSub">–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ üíß</div>
      </div>
    </div>
  </div>

  <!-- Undo bar -->
  <div class="undoBar" id="undoBar" style="display:none">
    <div class="undoInner">
      <div class="undoText" id="undoText">–î–æ–±–∞–≤–ª–µ–Ω–æ</div>
      <button class="undoBtn" id="undoBtn">–û—Ç–º–µ–Ω–∏—Ç—å (<span id="undoSec">5</span>)</button>
    </div>
  </div>

  <div class="wrap">
    <header class="topbar">
      <div>
        <div class="brand">AquaFlow</div>
        <div class="sub" id="userLine">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>
      </div>
      <button class="iconBtn" id="closeBtn" aria-label="close">‚úï</button>
    </header>

    <!-- TODAY -->
    <main id="view-today" class="view active">
      <section class="card hero">
        <div class="heroTop">
          <div class="ring" id="ring">
            <svg viewBox="0 0 120 120" aria-hidden="true">
              <circle class="bgc" cx="60" cy="60" r="48"></circle>
              <circle class="fgc" cx="60" cy="60" r="48"></circle>
            </svg>
            <div class="ringText">
              <div class="pct" id="pct">0%</div>
              <div class="big" id="todayMl">0 –º–ª</div>
              <div class="small" id="goalMl">–∏–∑ 0 –º–ª</div>
            </div>
          </div>

          <div class="heroSide">
            <div class="pill" id="levelPill" style="display:none">üèÖ <span id="levelVal">‚Äî</span></div>
            <div class="pill streak" id="streakPill" style="display:none">üî• –°—Ç—Ä–∏–∫: <span id="streakVal">0</span></div>
            <div class="hint" id="nextLine" style="display:none">–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è: <b id="toNext">‚Äî</b> –¥–Ω.</div>
            <div class="hint" id="formulaLine">–ù–æ—Ä–º–∞: –≤–µ—Å √ó 30‚Äì35 –º–ª</div>
          </div>
        </div>

        <div class="drinkRow">
          <div class="seg" id="drinkSeg">
            <button class="segBtn active" data-type="water">üíß –í–æ–¥–∞</button>
            <button class="segBtn" data-type="tea">üçµ –ß–∞–π</button>
            <button class="segBtn" data-type="coffee">‚òï –ö–æ—Ñ–µ</button>
          </div>
          <div class="hint" id="drinkHint">–í–æ–¥–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è 100%, —á–∞–π 80%, –∫–æ—Ñ–µ 60%</div>
        </div>

        <div class="chips">
          <button class="chip" data-add="200">+200</button>
          <button class="chip" data-add="250">+250</button>
          <button class="chip" data-add="330">+330</button>
          <button class="chip" data-add="500">+500</button>
        </div>

        <div class="row">
          <input id="customMl" class="input" type="number" min="1" max="5000" placeholder="–°–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –º–ª" />
          <button class="btn primary" id="addCustom">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
      </section>

      <section class="card">
        <div class="titleRow">
          <div>
            <div class="h2">–°–µ–≥–æ–¥–Ω—è</div>
            <div class="hint">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏</div>
          </div>
          <div class="mini" id="todayDate">‚Äî</div>
        </div>
        <div class="list" id="entries">‚Äî</div>
      </section>
    </main>

    <!-- STATS -->
    <main id="view-stats" class="view">
      <section class="card weekCard">
        <div class="titleRow">
          <div>
            <div class="h2">AquaFlow Week</div>
            <div class="hint">–ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ 7 –¥–Ω–µ–π</div>
          </div>
          <div class="mini" id="weekPctText">‚Äî</div>
        </div>

        <div class="weekTank">
          <div class="weekWater" id="weekWater">
            <div class="wave wave1"></div>
            <div class="wave wave2"></div>
          </div>
          <div class="weekOverlay">
            <div class="weekBig" id="weekBig">‚Äî</div>
            <div class="weekSmall" id="weekSmall">‚Äî</div>
            <div class="weekHint" id="weekHint">‚Äî</div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="titleRow">
          <div>
            <div class="h2">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ PRO</div>
            <div class="hint">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π</div>
          </div>
          <div class="exportBtns">
            <button class="btn" id="csvBtn">CSV (–º–µ—Å—è—Ü)</button>
            <button class="btn" id="pdfBtn">PDF (–º–µ—Å—è—Ü)</button>
          </div>
        </div>

        <div class="kpis">
          <div class="kpi">
            <div class="kpiVal" id="avg7">‚Äî</div>
            <div class="kpiLab">—Å—Ä–µ–¥–Ω–µ–µ / 7–¥</div>
          </div>
          <div class="kpi">
            <div class="kpiVal" id="median7">‚Äî</div>
            <div class="kpiLab">–º–µ–¥–∏–∞–Ω–∞ / 7–¥</div>
          </div>
          <div class="kpi">
            <div class="kpiVal" id="aboveBelow">‚Äî</div>
            <div class="kpiLab">–¥–Ω–µ–π –Ω–æ—Ä–º–∞ / –Ω–∏–∂–µ</div>
          </div>
          <div class="kpi">
            <div class="kpiVal" id="bestDay">‚Äî</div>
            <div class="kpiLab">–ª—É—á—à–∏–π –¥–µ–Ω—å</div>
          </div>
          <div class="kpi">
            <div class="kpiVal" id="curStreak">‚Äî</div>
            <div class="kpiLab">—Å—Ç—Ä–∏–∫ —Å–µ–π—á–∞—Å</div>
          </div>
          <div class="kpi">
            <div class="kpiVal" id="bestStreak">‚Äî</div>
            <div class="kpiLab">–ª—É—á—à–∏–π —Å—Ç—Ä–∏–∫</div>
          </div>
        </div>

        <div class="chart" id="chart7"></div>
        <div class="hint" style="margin-top:10px">–ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è –ª–∏–Ω–∏—è ‚Äî —Å–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ (3 –¥–Ω—è).</div>

        <div class="titleRow" style="margin-top:14px">
          <div>
            <div class="h2">–ù–∞–ø–∏—Ç–∫–∏ (7 –¥–Ω–µ–π)</div>
            <div class="hint">–í–∫–ª–∞–¥ –≤ –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</div>
          </div>
        </div>
        <div class="drinkChart" id="drinkChart"></div>
      </section>

      <section class="card">
        <div class="titleRow">
          <div>
            <div class="h2">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>
            <div class="hint">–û—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ –ª—É—á—à–µ–º—É —Å—Ç—Ä–∏–∫—É</div>
          </div>
        </div>
        <div class="achGrid" id="achGrid"></div>
      </section>
    </main>

    <!-- CALENDAR -->
    <main id="view-calendar" class="view">
      <section class="card">
        <div class="titleRow">
          <div>
            <div class="h2">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</div>
            <div class="hint">–¢–µ–ø–ª–æ–∫–∞—Ä—Ç–∞ ‚Äî –∫–∞–∫ GitHub</div>
          </div>
          <div class="calNav">
            <button class="iconBtn smallBtn" id="prevMonth">‚Äπ</button>
            <div class="mini" id="monthLabel">‚Äî</div>
            <button class="iconBtn smallBtn" id="nextMonth">‚Ä∫</button>
          </div>
        </div>

        <!-- iOS clip wrapper -->
        <div class="calClip">
          <div class="dow">
            <div>–ü–Ω</div><div>–í—Ç</div><div>–°—Ä</div><div>–ß—Ç</div><div>–ü—Ç</div><div>–°–±</div><div>–í—Å</div>
          </div>

          <div class="grid" id="calGrid"></div>

          <div class="legend">
            <div class="lg"><span class="dot none"></span> –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö</div>
            <div class="lg"><span class="dot some"></span> –Ω–µ–º–Ω–æ–≥–æ</div>
            <div class="lg"><span class="dot ok"></span> –Ω–æ—Ä–º–∞</div>
          </div>
        </div>
      </section>
    </main>

    <!-- PROFILE -->
    <main id="view-profile" class="view">
      <section class="card">
        <div class="h2">–ü—Ä–æ—Ñ–∏–ª—å</div>
        <div class="hint">–í–µ—Å –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–ª–∏—è—é—Ç –Ω–∞ –Ω–æ—Ä–º—É: –≤–µ—Å √ó (30‚Äì35 –º–ª)</div>

        <div class="profileBox">
          <div class="profileRow">
            <div class="lab">–í–µ—Å</div>
            <div class="val" id="pWeight">‚Äî</div>
          </div>
          <div class="profileRow">
            <div class="lab">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç</div>
            <div class="val" id="pFactor">‚Äî</div>
          </div>
          <div class="profileRow">
            <div class="lab">–ù–æ—Ä–º–∞</div>
            <div class="val" id="pGoal">‚Äî</div>
          </div>
        </div>

        <div class="row">
          <input id="weightInput" class="input" type="number" min="20" max="300" placeholder="–í–µ—Å, –∫–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä 70)" />
          <button class="btn" id="saveWeight">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>

        <div class="row">
          <input id="factorInput" class="input" type="number" min="30" max="35" placeholder="–ö–æ—ç—Ñ, –º–ª/–∫–≥ (30..35)" />
          <button class="btn" id="saveFactor">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>

        <div class="row">
          <input id="goalInput" class="input" type="number" min="500" max="10000" placeholder="–¶–µ–ª—å, –º–ª (–≤—Ä—É—á–Ω—É—é)" />
          <button class="btn" id="saveGoal">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ü–µ–ª—å</button>
        </div>

        <div class="hint" style="margin-top:10px">
          –ö–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–µ: <b>/setweight 70</b>, <b>/setfactor 33</b>
        </div>
      </section>
    </main>

    <!-- Bottom Tabbar -->
    <nav class="tabbar" aria-label="navigation">
      <button class="tab active" data-tab="today">
        <span class="ico">üíß</span><span class="txt">–°–µ–≥–æ–¥–Ω—è</span>
      </button>
      <button class="tab" data-tab="stats">
        <span class="ico">üìä</span><span class="txt">PRO</span>
      </button>
      <button class="tab" data-tab="calendar">
        <span class="ico">üìÖ</span><span class="txt">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</span>
      </button>
      <button class="tab" data-tab="profile">
        <span class="ico">‚öôÔ∏è</span><span class="txt">–ü—Ä–æ—Ñ–∏–ª—å</span>
      </button>
    </nav>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal" style="display:none">
    <div class="sheet">
      <div class="sheetTop">
        <div>
          <div class="h2" id="mDate">‚Äî</div>
          <div class="hint" id="mSub">‚Äî</div>
        </div>
        <button class="iconBtn smallBtn" id="mClose">‚úï</button>
      </div>
      <div class="sheetBody">
        <div class="sheetCard">
          <div class="lab">–í—ã–ø–∏—Ç–æ</div>
          <div class="val" id="mTotal">‚Äî</div>
        </div>
        <div class="sheetCard">
          <div class="lab">–ù–æ—Ä–º–∞</div>
          <div class="val" id="mGoal">‚Äî</div>
        </div>
        <div class="sheetCard">
          <div class="lab">–°—Ç–∞—Ç—É—Å</div>
          <div class="val" id="mStatus">‚Äî</div>
        </div>
      </div>
    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
